# Discrete-to-ASIC Delta-Sigma Acquisition System
（ディスクリート・ASIC連携によるデルタシグマデータ収集システム）

## 1. プロジェクト概要
本プロジェクトは、アナログ信号処理（PCB）とデジタル信号処理（ASIC）を統合した、ハードウェア・イン・ザ・ループ（HIL）構成のデータ収集システム構築プロジェクトです。
Tiny Tapeout（130nmプロセス）を用いて**CICデシメーションフィルタ**をASIC上に実装し、自作のディスクリート・デルタシグマ変調器（外部基板）からの1bit PDM信号をデシメーション処理・復調します。

本設計の主目的は、単なる回路実装にとどまらず、アナログ・フロントエンドからデジタル・バックエンドまでを設計・検証し、ミックスドシグナル・システムの統合プロセスを実証することにあります。

## 2. 開発ステータスとロードマップ (Status & Roadmap)
現在、ASIC側の論理設計および検証が完了しており、ファウンドリへの製造委託（テープアウト）に向けた最終調整段階にあります。

### Phase 1: ASIC論理設計・検証 【完了 (Done)】
* **RTL実装:** Verilog-2001によるCICフィルタの記述完了。
* **Pre-Silicon検証:** オープンEDAツール（Icarus Verilog）を用いたシミュレーションを実施済み。
    * テストベンチ内でPDM変調モデルを構築し、1kHz正弦波の入力に対してASIC回路が正しく復調・デシメーション動作を行うことを波形レベルで確認しました。

### Phase 2: テープアウト・PCB設計 【計画 (Planned)】
* **テープアウト:** 2025年3月のTiny Tapeout IHPシャトルへ提出予定。
* **PCB開発:** ASIC製造期間（待ち時間）を利用し、アナログフロントエンド基板の設計・製造を行います。確定したASICのピン配置や電気的特性に合わせて最適化を行います。

### Phase 3: 実機評価 (System Validation) 【2026年9月予定】
* **実チップ納品:** 2026年9月頃のチップ到着に合わせて、PCBとASICを結合。
* **統合テスト:** Digilent Analog Discoveryを用いた実波形観測により、S/N比や周波数応答の評価を実施します。

## 3. 設計思想 (Design Philosophy)
限られたリソースの中で、最大の学習効果とシステムの堅牢性を確保するため、以下の3点を設計指針としました。

### (1) アナログ・デジタル協調設計 (Co-Design)
既存のIPコアを使用せず、あえて外部PCB上にディスクリート部品で2次デルタシグマ変調器を構成します。これにより、ブラックボックス化されがちなアナログ変調挙動を物理的に可視化・調整可能とし、ASIC側のデジタルフィルタとのパラメータ整合性を物理層レベルで検証する構成としています。

### (2) ミニマリズムによる信頼性確保 (Simplicity First)
ASIC製造プロセスにおけるリスクを最小化するため、論理設計はシンプルさを最優先しました。
* **固定パラメータ:** 複雑な係数可変ロジックを排除し、デシメーション率を固定。
* **リソース最適化:** 入力ビット幅やフィルタ段数を理論上の必要最小限（N=3）に留め、検証容易性を高めています。

### (3) 実機検証を重視したインターフェース
シミュレーション上の理想値だけでなく、実機での波形観測を前提としたI/O設計を行いました。ASIC内部の16bit演算結果に対し、測定器（ロジックアナライザ）の分解能に合わせたビットトランケーション（上位8bit出力）を実装し、実時間での波形再構成を可能にしています。

## 4. 技術仕様 (Specifications)

### システム全体仕様
| 項目 | 仕様 | 備考 |
| :--- | :--- | :--- |
| **入力フォーマット** | 1-bit PDM (Pulse Density Modulation) | 自作外部基板（2次変調器）より入力予定 |
| **ロジック電圧** | 3.3V (LVCMOS) | Tiny Tapeout Demo Board準拠 |
| **動作クロック** | 2.048 MHz | 外部基板のサンプリングレートと同期 |
| **信号帯域** | ~10 kHz | 音声・センサ帯域を想定 |

### ASIC内部（CICフィルタ）仕様
| パラメータ | 設定値 | 設計根拠 |
| :--- | :--- | :--- |
| **次数 ($N$)** | 3 | 2次デルタシグマ変調の量子化ノイズ整形に対応 |
| **デシメーション率 ($R$)** | 32 | 2.048 MHz入力 → 64 kHz出力 |
| **遅延 ($M$)** | 1 | 標準構成 |
| **内部ビット幅** | 16-bit | オーバーフローを許容するラップアラウンド演算用に設計 ($B_{out} = B_{in} + N \log_2 R$) |
| **出力ビット幅** | 8-bit | 外部ピン数制約に合わせMSB側8bitを出力 |

## 5. 使用ツール・環境
* **HDL:** Verilog-2001
* **Simulation:** Icarus Verilog, GTKWave (EDA Playground)
* **Implementation:** Tiny Tapeout IHP 130nm Open Source PDK
* **Measurement (Plan):** Digilent Analog Discovery 2/3
